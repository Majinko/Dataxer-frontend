<form [formGroup]="formGroup" (ngSubmit)="doFilter()">
    <div class="mt-3">
      <div class="row">
        <div class="col-md-4 col-lg-2">
          <ng-select [items]="users"
                     [clearable]="false"
                     bindLabel="displayName"
                     placeholder="Používateľ"
                     formControlName="user"
                     class="filter-ng-select">
          </ng-select>
        </div>
        <div class="col-md-4 col-lg-2">
          <ng-select [clearable]="false"
                     bindLabel="fullTitle"
                     placeholder="Zákazka"
                     formControlName="project"
                     groupBy="group"
                     class="filter-ng-select">
            <ng-option [value]="{id: null, title: 'Firemný náklad'}">
              Firemný náklad
            </ng-option>
            <ng-option *ngFor="let project of projects" [value]="project">
              {{ project.fullTitle }}
            </ng-option>
          </ng-select>
        </div>
        <div class="col-md-4 col-lg-2">
          <ng-select [items]="categories"
                     [clearable]="false"
                     bindLabel="name"
                     placeholder="Kategória"
                     formControlName="category"
                     groupBy="parentName"
                     class="filter-ng-select">
          </ng-select>
        </div>
        <div class="col-md-4 col-lg-2">
          <ng-select [items]="options"
                     [clearable]="false"
                     bindLabel="name"
                     placeholder="Zobrazenie"
                     formControlName="display"
                     groupBy="parentName"
                     class="filter-ng-select">
          </ng-select>
        </div>
        <div class="col-md-4 col-lg-2" *ngIf="dates && dates.length > 0">
          <ng-select [items]="dates"
                     [clearable]="false"
                     bindLabel="title"
                     placeholder="Dátum"
                     formControlName="date"
                     groupBy="type"
                     class="filter-ng-select">

            <ng-template ng-footer-tmp>
              <div class="cursor-pointer" (click)="monthDateRange()"><span>Od - do</span></div>
            </ng-template>
          </ng-select>
        </div>
      </div>
    </div>
  </form>
  <div class="d-block d-md-flex align-content-center mb-3" >
    <mat-chip-list aria-label="Filtering">
      <mat-chip class="text-gray my-md-0  mb-md-0" *ngIf="users && users.length > 0 && formGroup.get('user').value">
        <mat-icon class="mr-1">person</mat-icon>
        {{formGroup.get('user').value.displayName}}
        <mat-icon (click)="resetFilterValue('user')" matChipRemove>cancel</mat-icon>
      </mat-chip>

      <mat-chip class="text-gray my-md-0  mb-md-0" *ngIf="projects && projects.length > 0 && formGroup.get('project').value">
        <mat-icon class="mr-1">layers</mat-icon>
        {{formGroup.get('project').value.title}}
        <mat-icon (click)="resetFilterValue('project')" matChipRemove>cancel</mat-icon>
      </mat-chip>

      <mat-chip class="text-gray my-md-0  mb-md-0" *ngIf="categories && categories.length > 0 && formGroup.get('category').value">
        <mat-icon class="mr-1">folder</mat-icon>
        {{formGroup.get('category').value.name}}
        <mat-icon (click)="resetFilterValue('category')" matChipRemove>cancel</mat-icon>
      </mat-chip>

      <mat-chip class="text-gray my-md-0  mb-md-0" *ngIf="dates && dates.length > 0 && formGroup.get('date').value">
        <mat-icon class="mr-1">access_time</mat-icon>
        {{(formGroup.get('date').value.start | date: 'dd.MM.y') + ' - ' + (formGroup.get('date').value.end | date: 'dd.MM.y' )}}
        <mat-icon (click)="resetFilterValue('date')" matChipRemove>cancel</mat-icon>
      </mat-chip>

      <mat-chip class="text-gray my-md-0  mb-md-0" *ngIf="options && options.length > 0 && formGroup.get('display').value">
        <mat-icon class="mr-1">folder</mat-icon>
        {{formGroup.get('display').value.name}}
        <mat-icon (click)="resetFilterValue('display')" matChipRemove>cancel</mat-icon>
      </mat-chip>

    </mat-chip-list>
  </div>
